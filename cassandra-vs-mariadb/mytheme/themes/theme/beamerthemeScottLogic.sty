\ProvidesPackage{beamerthemeScottLogic}[2017/02/01]
\usepackage{lmodern}
\mode<presentation>
\AtEndDocument{\usebeamertemplate{endpage}}

% Our theme is based on these
\usetheme{Rochester}
\useoutertheme{infolines}
\usecolortheme[named=Black]{structure}

% Footer / header sizes
\newlength{\headerheight}
\newlength{\footerheight}
\newlength{\imagefooterheight}
\setlength{\headerheight}{4.5ex}
\setlength{\imagefooterheight}{2.5ex}
\setlength{\footerheight}{2.5ex}

% colour definition from beameroutertheminfolines.sty
\setbeamercolor{scottlogic@ftcolor}{parent=palette secondary}

% Headline
\setbeamertemplate{headline}{%
  \ifnum\c@framenumber>1%
  \leavevmode%
  \usebeamerfont{structure}%
  \begin{beamercolorbox}[wd=\paperwidth,ht=\headerheight,dp=0ex]{scottlogic@ftcolor}%
    \vbox to\headerheight%
    {%
      \vfil%
      \hspace{4mm}%
      \large%
      \ifx\insertsectionhead\@empty%
      {%
        \textbf{\insertframetitle}%
      }%
      \else%
      {%
        \textbf{\insertsectionhead}%
        \hfill%
        {%
          \small%
          \insertframetitle%
          \hspace{4mm}
        }%
      }%
      \fi%
      \vfil%
    }%
  \end{beamercolorbox}%
  \fi%
}

% Scott Logic footline
\setbeamertemplate{footline}{%
  \leavevmode%
  \usebeamerfont{structure}%
  \begin{beamercolorbox}[wd=\paperwidth,ht=\footerheight,dp=0ex]{scottlogic@ftcolor}%
    \vbox to\footerheight%
    {%
      \includegraphics[width=\paperwidth,height=\imagefooterheight]{scott-logic-footer.png}%
      \vskip-\imagefooterheight%
      \vfil%
      \hfill%
      {%
        \tiny%
        \insertframenumber/\inserttotalframenumber%
        \hspace{4mm}
      }%
      \vfil%
    }%
  \end{beamercolorbox}%
}

% Colours for lists
\definecolor{listone}{RGB}{43,175,186}
\definecolor{listtwo}{RGB}{197,23,101}
\definecolor{listthree}{RGB}{153,153,153}

% Lists
\setbeamertemplate{enumerate items}[default]
\setbeamertemplate{itemize items}[default]

\setbeamercolor{enumerate item}{fg=listone}
\setbeamercolor{enumerate subitem}{fg=listtwo}
\setbeamercolor{enumerate subsubitem}{fg=listthree}

\setbeamercolor{itemize item}{fg=listone}
\setbeamercolor{itemize subitem}{fg=listtwo}
\setbeamercolor{itemize subsubitem}{fg=listthree}

\setbeamercolor{itemize/enumerate subsubbody}{fg=listthree}

% Block
\setbeamertemplate{blocks}[rounded][shadow=false]

% Table of contents
\setbeamertemplate{sections/subsections in toc}[circle]
\setbeamercolor{section in toc}{fg=listone}
\setbeamercolor{subsection in toc}{fg=listtwo}

% don't show navigation buttons
\setbeamertemplate{navigation symbols}{}

% Final slide
\setbeamertemplate{endpage}{%
  \begin{frame}[plain]% No header or footer
    \makebox[\linewidth]{%
      \includegraphics[width=\paperwidth,height=\paperheight]{full-scott-logic.png}%
    }
  \end{frame}
}

\mode<all>
