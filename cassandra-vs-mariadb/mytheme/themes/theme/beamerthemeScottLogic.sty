\ProvidesPackage{beamerthemeScottLogic}[2017/02/01]
\usepackage{lmodern}
\usepackage{listings}
\mode<presentation>
\AtEndDocument{\usebeamertemplate{endpage}}

% Code environment
\lstnewenvironment{code}[1]{%
  \lstset{language=#1,
          columns=fullflexible,
          basicstyle=\ttfamily\small,
          keywordstyle=\color{blue}\ttfamily,
          stringstyle=\color{red}\ttfamily,
          commentstyle=\color{green}\ttfamily,
          moredelim=[is][\color{gray}]{<@}{@>},
          breaklines=true,
          showspaces=false,
          showstringspaces=false}
}{}

% Our theme is based on these
\usetheme{Frankfurt}
\usecolortheme[named=gray]{structure}

% Footer / header sizes
\newlength{\headerheight}
\newlength{\footerheight}
\newlength{\imagefooterheight}
\setlength{\headerheight}{4.5ex}
\setlength{\imagefooterheight}{2.5ex}
\setlength{\footerheight}{2.5ex}

\setbeamercolor{scottlogic@ftcolor}{parent=palette primary}

% Section title pages
\AtBeginSection[]{
  {
    \begin{frame}
      \centering
      \Large
      \textbf{\textcolor{structure}{\insertsection}}
    \end{frame}
  }
}

% Scott Logic footline
\setbeamertemplate{footline}{%
  \leavevmode%
  \usebeamerfont{structure}%
  \begin{beamercolorbox}[wd=\paperwidth,ht=\footerheight,dp=0ex]{scottlogic@ftcolor}%
    \vbox to\footerheight%
    {%
      \includegraphics[width=\paperwidth,height=\imagefooterheight]{scott-logic-footer.png}%
      \vskip-\imagefooterheight%
      \vfil%
      \hfill%
      {%
        \tiny%
        \insertframenumber/\inserttotalframenumber%
        \hspace{4mm}
      }%
      \vfil%
    }%
  \end{beamercolorbox}%
}


% Colours for lists
\definecolor{listone}{RGB}{43,175,186}
\definecolor{listtwo}{RGB}{197,23,101}
\definecolor{listthree}{RGB}{153,153,153}

% Lists
\setbeamertemplate{enumerate items}[default]
\setbeamertemplate{itemize items}[default]

\setbeamercolor{enumerate item}{fg=listone}
\setbeamercolor{enumerate subitem}{fg=listtwo}
\setbeamercolor{enumerate subsubitem}{fg=listthree}

\setbeamercolor{itemize item}{fg=listone}
\setbeamercolor{itemize subitem}{fg=listtwo}
\setbeamercolor{itemize subsubitem}{fg=listthree}

\setbeamercolor{itemize/enumerate subsubbody}{fg=listthree}

% Block
\setbeamertemplate{blocks}[rounded][shadow=false]

% Table of contents
\setbeamertemplate{section in toc}[ball unnumbered]
\setbeamertemplate{subsection in toc}[default]
\setbeamercolor{section in toc}{fg=black}
\setbeamercolor{subsection in toc}{fg=listthree}

% don't show navigation buttons
\setbeamertemplate{navigation symbols}{}

% Final slide
\setbeamertemplate{endpage}{%
  \begin{frame}[plain]% No header or footer
    \makebox[\linewidth]{%
      \includegraphics[width=\paperwidth,height=\paperheight]{full-scott-logic.png}%
    }
  \end{frame}
}

\mode<all>
